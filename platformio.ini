; dadamachines automat â€” PlatformIO build configuration
; https://dadamachines.com
;
; Board: SAMD21G18A (Cortex-M0+, 48 MHz, 256 KB Flash, 32 KB RAM)
; Framework: Adafruit Arduino SAMD Core (framework-arduino-samd-adafruit)
;
; Build:   pio run
; Upload:  pio run -t upload
; UF2:     .uf2 file is auto-generated in .pio/build/automat/ after each build

[env:automat]
platform = atmelsam
board = dadamachines_automat
framework = arduino

; Use the Adafruit SAMD core
board_build.core = adafruit

; Point to our custom variant directory
board_build.variants_dir = variants

; Library dependencies (auto-installed by PlatformIO)
lib_deps =
    cmaglie/FlashStorage @ ^1.0.0
    fortyseveneffects/MIDI Library @ ^5.0.2
    arduino-libraries/MIDIUSB @ ^1.0.5
    mathertel/OneButton @ ^2.0.3

; USB identifiers
board_build.usb_product = "dadamachines automat"
board_build.usb_manufacturer = "dadamachines"

; Post-build: convert .bin to .uf2 for drag-and-drop flashing
extra_scripts = post:extra_scripts/post_build_uf2.py
